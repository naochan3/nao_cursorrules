---
description: コードレビューの観点、コメントの基準、マージ判断のガイドラインを定義します。レビュー品質の均質化と心理的安全性の確保を目的とします。
globs: [".github/pull_request_template.md"]
---

# 36. コードレビューガイドライン (Code Review Guidelines)

- Description: コードレビューは「粗探し」ではなく「品質向上と知識共有の場」です。AIによるレビューも含め、建設的で効率的なプロセスを目指します。

# 1. レビュー観点 (Checklist)

以下の優先順位でチェックしてください。

1.  **機能的正確性 (Correctness)**: 要件を満たしているか？バグはないか？
2.  **セキュリティ (Security)**: `23-security-policy.mdc` に違反していないか？（XSS, SQLi, 権限漏れ）
3.  **可読性と保守性 (Readability)**: 変数名は適切か？複雑すぎないか？DRY/KISS原則に従っているか？
4.  **テスト (Tests)**: テストコードは含まれているか？カバレッジは十分か？
5.  **スタイル (Style)**: Lintで自動修正できる内容は人間が指摘しない。

# 2. コメントのレベル分け (Comment Labels)

コメントの冒頭にラベルを付け、意図を明確にします。

- **[MUST]**: 必ず修正が必要。マージ不可（Blocker）。
    - 例: バグ、セキュリティリスク、明白な仕様違反。
- **[IMO] (In My Opinion)**: 修正した方が良いと思うが、実装者に任せる。マージ可。
    - 例: より良い変数名の提案、可読性向上のための提案。
- **[ASK]**: 質問、確認。意図が分からない場合など。
- **[nits] (Nitpick)**: 細かい指摘。修正しなくてもマージ可。
    - 例: タイポ、コメントの軽微な修正。

# 3. 心理的安全性 (Psychological Safety)

- **人格ではなくコードを指摘する**: "You are wrong" ではなく "This code might cause..." と書く。
- **良い点は褒める**: "[Good]", "[Nice]" などのコメントも積極的に残す。
- **AIレビューの活用**: 単純なミスやスタイル指摘はAIに任せ、人間は設計やロジックの妥当性に集中する。

# 4. AIへの指示

- 「このPRのコードをレビューして。セキュリティとエッジケースの観点で [MUST] な問題があれば指摘して。細かいスタイル指摘は [nits] としてまとめて。」
- 「この関数の命名が分かりにくいので、[IMO] ラベルで代替案を3つ提案して。」
