---
alwaysApply: false
---
Description: Reactã¨Next.jsã‚’ä½¿ã£ãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæŒ‡å‘é–‹ç™ºã«ãŠã‘ã‚‹ã€ä¸€è²«æ€§ã®ã‚ã‚‹ãƒ¢ãƒ€ãƒ³ãªè¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å®šç¾©ã—ã¾ã™ã€‚React 19, Next.js 15, FSDã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«åŸºã¥ã„ã¦ã„ã¾ã™ã€‚

**é‡è¦**: ã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºã«ãŠã‘ã‚‹æœŸå¾…ãƒ¬ãƒ™ãƒ«ï¼ˆ`00-mindset.mdc`ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³8ã€`26-implementation-process.mdc`ï¼‰ã‚’å¿…ãšéµå®ˆã—ã¦ãã ã•ã„ã€‚å˜ä¸€ãƒšãƒ¼ã‚¸ã®ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®ã¿ã€åŸºæœ¬çš„ãªCRUDæ“ä½œã®ã¿ã§æº€è¶³ã™ã‚‹ã“ã¨ã¯çµ¶å¯¾ã«ç¦æ­¢ã§ã™ã€‚

# 1. Feature-Sliced Design (FSD) ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã¯ã€FSD (Feature-Sliced Design) ã«åŸºã¥ãã€æ©Ÿèƒ½å˜ä½ã§ã®å‡é›†åº¦ã‚’é«˜ã‚ã€çµåˆåº¦ã‚’ä¸‹ã’ã¾ã™ã€‚

- **éšå±¤æ§‹é€  (Layers)**:
    1. **`app/`**: Next.js App Routerã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã€‚ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã€ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã€ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼è¨­å®šã®ã¿ã€‚
    2. **`widgets/`**: ç‹¬ç«‹ã—ãŸæ©Ÿèƒ½ãƒ–ãƒ­ãƒƒã‚¯ã®é›†åˆä½“ï¼ˆä¾‹: Header, ProductListï¼‰ã€‚ãƒšãƒ¼ã‚¸ã‚’æ§‹æˆã™ã‚‹å¤§ããªéƒ¨å“ã€‚
    3. **`features/`**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã¨ã£ã¦ä¾¡å€¤ã‚ã‚‹ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å˜ä½ï¼ˆä¾‹: Login, AddToCart, FilterProductsï¼‰ã€‚ãƒ“ã‚¸ãƒã‚¹ä¾¡å€¤ã®ä¸­æ ¸ã€‚
    4. **`entities/`**: ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã¨ãƒ‡ãƒ¼ã‚¿ã®å®šç¾©ï¼ˆä¾‹: User, Product, Orderï¼‰ã€‚ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«ã€‚
    5. **`shared/`**: ã©ã“ã‹ã‚‰ã§ã‚‚ä½¿ãˆã‚‹å†åˆ©ç”¨å¯èƒ½ãªã‚³ãƒ¼ãƒ‰ï¼ˆä¾‹: UI Kit, utils, API clientï¼‰ã€‚ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã‚’æŒãŸãªã„ã€‚

- **ä¾å­˜ãƒ«ãƒ¼ãƒ«**: **ã€Œä¸‹å±¤ã¯ä¸Šå±¤ã‚’çŸ¥ã£ã¦ã¯ãªã‚‰ãªã„ï¼ˆä¾å­˜ã—ã¦ã¯ãªã‚‰ãªã„ï¼‰ã€**ã€‚
    - `features` ã¯ `entities` ã¨ `shared` ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆå¯ã€‚`widgets` ã¯ã‚¤ãƒ³ãƒãƒ¼ãƒˆä¸å¯ã€‚
    - `shared` ã¯ä»–ã®ã©ã®å±¤ã‚‚ã‚¤ãƒ³ãƒãƒ¼ãƒˆä¸å¯ã€‚

# 2. Next.js 15 & Server Actions Patterns
- **Caching Strategy (Next.js 15 Changes)**:
    - Next.js 15ã§ã¯ `fetch` ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥å‹•ä½œãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ `no-store` (å‹•çš„) ã«å¤‰æ›´ã•ã‚Œã¾ã—ãŸã€‚é™çš„ãªãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹å ´åˆã¯æ˜ç¤ºçš„ã« `cache: 'force-cache'` ã‚’æŒ‡å®šã—ã¦ãã ã•ã„ã€‚
    - ãƒ«ãƒ¼ãƒˆãƒãƒ³ãƒ‰ãƒ© (`route.ts`) ã®GETãƒ¡ã‚½ãƒƒãƒ‰ã‚‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§å‹•çš„ã§ã™ã€‚

- **Server Actions + Zod Validation**:
    - ãƒ•ã‚©ãƒ¼ãƒ å‡¦ç†ã¯ Server Actions ã‚’ä½¿ç”¨ã—ã€`zod` ã§å³æ ¼ã«ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã—ã¾ã™ã€‚
    - **`useActionState`** (æ—§ `useFormState`) ã‚’ä½¿ç”¨ã—ã¦ã€ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ã®çŠ¶æ…‹ï¼ˆæˆåŠŸ/å¤±æ•—/ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ï¼‰ã‚’ç®¡ç†ã—ã¾ã™ã€‚
    
    ```typescript
    // app/actions.ts
    'use server'
    import { z } from 'zod';
    
    const schema = z.object({
      email: z.string().email(),
    });

    type State = {
      errors?: { email?: string[] };
      message?: string;
    };

    export async function subscribe(prevState: State, formData: FormData): Promise<State> {
      const result = schema.safeParse({ email: formData.get('email') });
      
      if (!result.success) {
        return { errors: result.error.flatten().fieldErrors };
      }
      
      try {
        // DBæ“ä½œãªã©
        return { message: 'ç™»éŒ²ã—ã¾ã—ãŸ' };
      } catch (e) {
        return { message: 'ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ' };
      }
    }
    ```

- **Server Components First**:
    - éåŒæœŸãƒ‡ãƒ¼ã‚¿å–å¾—ã¯ Server Components ã§è¡Œã„ã¾ã™ã€‚
    - ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§ã®å¯¾è©±ãŒå¿…è¦ãªéƒ¨åˆ†ã®ã¿ `'use client'` ã‚’ä»˜ä¸ã—ã€Leaf Componentï¼ˆæœ«ç«¯ã®éƒ¨å“ï¼‰ã¨ã—ã¦åˆ‡ã‚Šå‡ºã—ã¾ã™ã€‚

# 3. React 19 Modern Hooks
- **`useActionState`**:
    - Server Actions ã®å®Ÿè¡Œçµæœã€ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹ (`isPending`)ã€ã‚¨ãƒ©ãƒ¼ã‚’ä¸€å…ƒç®¡ç†ã—ã¾ã™ã€‚
    ```tsx
    'use client'
    import { useActionState } from 'react';
    import { subscribe } from './actions';

    export function SignupForm() {
      const [state, formAction, isPending] = useActionState(subscribe, {});
      
      return (
        <form action={formAction}>
          <input name="email" />
          {state.errors?.email && <p>{state.errors.email[0]}</p>}
          <button disabled={isPending}>{isPending ? 'é€ä¿¡ä¸­...' : 'ç™»éŒ²'}</button>
        </form>
      );
    }
    ```

- **`useOptimistic`**:
    - ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å¾…ãŸãšã«UIã‚’å³åº§ã«æ›´æ–°ã—ã€ä½“æ„Ÿé€Ÿåº¦ã‚’å‘ä¸Šã•ã›ã¾ã™ã€‚
    ```tsx
    const [optimisticMessages, addOptimisticMessage] = useOptimistic(
      messages,
      (state, newMessage) => [...state, newMessage]
    );
    ```

- **`use` API**:
    - `useContext` ã‚„ Promise ã®è§£æ±ºã«ä½¿ç”¨ã—ã¾ã™ã€‚æ¡ä»¶åˆ†å²å†… (`if`) ã§ã‚‚å‘¼ã³å‡ºã—å¯èƒ½ã§ã™ã€‚
    - ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§Promiseã‚’å—ã‘å–ã‚‹éš›ã« `await` ã®ä»£ã‚ã‚Šã«ä½¿ç”¨ã—ã¾ã™ã€‚

# 4. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆã¨å‹å®‰å…¨æ€§ (TypeScript)
- **ã‚¢ã‚¤ã‚³ãƒ³å®Ÿè£…ã®åŸå‰‡ (Icon Implementation)**:
    - **çµµæ–‡å­—ã®ç¦æ­¢**: UIã‚¢ã‚¤ã‚³ãƒ³ã¨ã—ã¦ã®çµµæ–‡å­—ï¼ˆUnicodeï¼‰ã®ä½¿ç”¨ã¯ç¦æ­¢ã—ã¾ã™ã€‚
    - **æ¨å¥¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒª**: `lucide-react` ã¾ãŸã¯ `heroicons` ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚
    ```tsx
    // âŒ Bad
    <button>ğŸ“¥ Download</button>

    // âœ… Good
    import { Download } from 'lucide-react';
    <button><Download className="w-4 h-4 mr-2" />Download</button>
    ```
- **Props Interface**: æ‹¡å¼µæ€§ã‚’è€ƒæ…®ã—ã€ãƒã‚¤ãƒ†ã‚£ãƒ–ã®HTMLå±æ€§ã‚’ç¶™æ‰¿ã—ã¾ã™ã€‚
    ```typescript
    interface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {
      variant?: 'primary' | 'secondary';
    }
    ```
- **Discriminated Unions (åˆ¤åˆ¥å¯èƒ½ãªå…±ç”¨ä½“)**:
    - æ’ä»–çš„ãªãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®çµ„ã¿åˆã‚ã›ã‚’å‹ã§å¼·åˆ¶ã—ã¾ã™ã€‚
    ```typescript
    type ButtonVariant = 
      | { variant: 'primary'; destructive?: never }
      | { variant: 'destructive'; primary?: never };
    ```
- **Generics**: å†åˆ©ç”¨å¯èƒ½ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆSelectBox, Listç­‰ï¼‰ã«ã¯ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã‚’ä½¿ç”¨ã—ã€å‹å®‰å…¨æ€§ã‚’ç¶­æŒã—ã¾ã™ã€‚

# 5. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ†å‰²æˆ¦ç•¥
- **å˜ä¸€è²¬ä»»ã®åŸå‰‡ (Single Responsibility)**:
    - UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆè¦‹ãŸç›®ï¼‰ã¨ Featureã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆãƒ­ã‚¸ãƒƒã‚¯ãƒ»ãƒ‡ãƒ¼ã‚¿å–å¾—ï¼‰ã‚’æ˜ç¢ºã«åˆ†é›¢ã—ã¾ã™ã€‚
    - 1ãƒ•ã‚¡ã‚¤ãƒ«ãŒ **150è¡Œ** ã‚’è¶…ãˆãŸã‚‰åˆ†å‰²ã®ã‚µã‚¤ãƒ³ã§ã™ã€‚
- **CVA (Class Variance Authority)**:
    - ãƒãƒªã‚¢ãƒ³ãƒˆç®¡ç†ã«ã¯ `cva` ã‚’ä½¿ç”¨ã—ã€æ¡ä»¶ä»˜ãã‚¯ãƒ©ã‚¹åã®è¨˜è¿°ã‚’æ•´ç†ã—ã¾ã™ã€‚`tailwind-merge` ã¨çµ„ã¿åˆã‚ã›ã¦ç«¶åˆã‚’è§£æ±ºã—ã¾ã™ã€‚

# 6. ã‚¹ãƒ†ãƒ¼ãƒˆç®¡ç†ã®ã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³å›é¿
- **`useEffect` ã§ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒç¦æ­¢**: `use` ãƒ•ãƒƒã‚¯ã€Server Componentsã€ã¾ãŸã¯ SWR/React Query ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚
- **æ´¾ç”Ÿã‚¹ãƒ†ãƒ¼ãƒˆã® `useState` ç¦æ­¢**: props ã‚„ä»–ã® state ã‹ã‚‰è¨ˆç®—ã§ãã‚‹å€¤ã¯ã€ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ä¸­ã«ç›´æ¥è¨ˆç®—ã™ã‚‹ã‹ã€é‡ã„å ´åˆã¯ `useMemo` ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚
