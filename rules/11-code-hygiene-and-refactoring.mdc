---
alwaysApply: false
---
Description: コードの品質を維持し、技術的負債を溜めないためのルール。不要なコードの削除、複雑なロジックの改善（リファクタリング）を促します。機能開発が一区切りついたタイミングや、コードレビューの前に適用してください。

# 1. 「ボーイスカウト・ルール」を実践する
- **考え方**: ボーイスカウトの「来た時よりも美しく」という言葉に倣い、**自分が触ったコードは、元の状態よりも少しでも綺麗にしてから立ち去る**というプロの習慣です。変数名を一つ分かりやすくする、コメントを一行追加するなど、ほんの小さな改善の積み重ねが、プロジェクト全体の品質を大きく向上させます。
- **AIへの指示**: 「この関数を修正したんだけど、ついでに何か簡単に改善できるところはないかな？ボーイスカウト・ルールに従って、ちょっとだけ綺麗にしておきたい。」

# 2. 死んだコード（Dead Code）は弔う
- **考え方**: コメントアウトされたままの古いコード、どこからも呼び出されていない関数や変数、インポートされているが使われていないライブラリ。これらは「死んだコード」であり、コードベースのノイズです。可読性を下げ、混乱の元になるので、見つけ次第、感謝と共に削除しましょう。
- **AIへの指示**: 「このプロジェクト全体（または指定したファイル）を解析して、使われていない関数、変数、インポートをリストアップして。削除しても安全か確認したい。」

# 3. リファクタリングを恐れない
- **考え方**: リファクタリングとは、外から見た振る舞いを変えずに、内部の構造を改善することです。「動いているコードに触るな」は悪魔のささやきです。複雑で読みにくいコードは、将来必ずバグを生みます。テストがあり、目的が明確であれば、リファクタリングは未来への最高の投資です。
- **リファクタリングのサイン**:
    - 関数が長すぎる（責務が多すぎる）
    - 同じようなコードをコピペしてしまった
    - ネストが深すぎる
    - 変数名が、もはや実態を表していない
- **AIへの指示**: 「この関数、ネストが深くて読みにくい。もっとシンプルで分かりやすい構造にリファクタリングする案を、ステップ・バイ・ステップで提案してほしい。」

# 4. コードレビュー前のセルフチェックリスト
- **考え方**: 他の人にレビューを依頼する前に、自分で自分のコードをレビューするのは非常に重要です。これにより、レビューの質が上がり、チーム全体の時間が節約されます。
- **チェックリスト**:
    - [ ] このコードは、意図通りに動作するか？（セルフテスト）
    - [ ] このコードを説明するためのテストは書かれているか？
    - [ ] `console.log`などのデバッグコードは残っていないか？
    - [ ] 新しく追加した変数や関数名は、誰が読んでも分かりやすいか？
    - [ ] コメントアウトされた不要なコードは残っていないか？
    - [ ] 関連するドキュメント（`learning-documentation.mdc`など）は更新したか？
- **AIへの指示**: 「この後、このコードをプルリクエストに出す予定だ。上のチェックリストに沿って、何か見落としている点がないか、第三者の視点でチェックしてほしい。」

# 5. 認知的複雑度 (Cognitive Complexity) を下げる
- **考え方**: コードの良し悪しは「行数」ではなく「理解しやすさ」で決まります。ネストの深さ、分岐の多さは「認知的複雑度」を高め、バグの温床になります。
- **指標**:
    - ネストは原則2階層まで（早期リターンを活用する）。
    - 1つの関数で扱う変数は7つ以内（マジカルナンバー7）。
- **AIへの指示**: 「この関数、`if`と`for`が重なっていて読むのが辛い。早期リターン（Early Return）を使ってネストを浅くし、認知的複雑度を下げてほしい。」