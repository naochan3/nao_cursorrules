---
alwaysApply: false
---
Description: デザインシステムを再利用可能なコンポーネントとして実装し、Storybookでカタログ化するためのルールです。一貫性のあるUIを効率的に構築し、コンポーネントの単体開発とテストを容易にすることを目的とします。

# 1. コンポーネント駆動開発 (CDD) の考え方
- **考え方**: アプリケーションを「ページ」単位ではなく、独立した「コンポーネント」の集合体として捉え、ボトムアップでUIを構築していく開発手法です。コンポーネントを一つずつ孤立した環境で開発することで、再利用性が高まり、開発プロセスが単純化されます。
- **ワークフロー**:
  1. まずはボタンや入力フォームのような最小単位のコンポーネントを作る。
  2. それらを組み合わせて、カードやフォームのような少し大きなコンポーネントを作る。
  3. 最終的に、それらのコンポーネントを組み上げてページを完成させる。

# 2. Storybookで「生きたUIカタログ」を作る
- **考え方**: Storybookは、UIコンポーネントを一覧表示し、様々な状態でインタラクティブに確認できる開発ツールです。これは、単なるドキュメントではなく、開発者やデザイナーがコンポーネントを実際に触って確認できる「生きたカタログ」となります。
- **必須事項**: UIに関わる全ての汎用コンポーネントには、対応するStorybookファイル (`*.stories.tsx`) を作成してください。
- **AIへの指示**: 「この`Button`コンポーネントのStorybookファイルを作成して。`primary`, `secondary`, `disabled`の状態をそれぞれストーリーとして表現してほしい。」

# 3. コンポーネントの責務を明確にする
- **Presentational Component (見た目担当)**:
    - 見た目とUIの振る舞いにのみ責任を持つ。
    - 内部に状態を持たず、全てのデータとコールバック関数を`props`経由で受け取る。
    - Storybookで管理しやすい。
- **Container Component (ロジック担当)**:
    - データの取得や状態管理などのロジックに責任を持つ。
    - Presentational Componentをラップし、必要な`props`を渡す。
- **AIへの指示**: 「このコンポーネントは、ロジックと見た目が混ざりすぎている。Presentational ComponentとContainer Componentに分割して、責務を明確にしてほしい。」

# 4. コンポーネントの再利用性を意識する
- **考え方**: 特定の場所でしか使えないコンポーネントではなく、少し変更すれば他の場所でも使えるような、汎用的なコンポーネントを設計しましょう。
- **例**: 「ユーザー紹介カード」を作るのではなく、「画像とタイトルと説明文を受け取れる汎用的なカードコンポーネント」として設計する。
- **AIへの指示**: 「このコンポーネント、もっと再利用性を高めるにはどうすればいいかな？Propsの設計についてアドバイスがほしい。」

# 5. インタラクションテスト (Interaction Testing)
- **考え方**: コンポーネントの見た目だけでなく、「振る舞い」もStorybook上でテストします。`play`関数を使うことで、クリックや入力などのユーザー操作をシミュレーションし、状態変化を検証できます。これにより、実ブラウザでの手動テストの手間を大幅に削減できます。
- **実装例**:
    ```tsx
    // LoginForm.stories.tsx
    import { userEvent, within } from '@storybook/testing-library';
    import { expect } from '@storybook/jest';

    export const SubmitSuccess = {
      play: async ({ canvasElement }) => {
        const canvas = within(canvasElement);
        await userEvent.type(canvas.getByLabelText('Email'), 'test@example.com');
        await userEvent.click(canvas.getByRole('button'));
        await expect(canvas.getByText('送信しました')).toBeInTheDocument();
      },
    };
    ```
- **AIへの指示**: 「このフォームコンポーネントのStorybookに、メールアドレスを入力して送信ボタンを押すまでのインタラクションテスト（`play`関数）を追加して。」