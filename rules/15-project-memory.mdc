---
alwaysApply: false
---
Description: プロジェクトに関する重要な決定や、大規模な変更の履歴を「短期記憶ログ」として記録する際に使用します。「この変更をメモリに記録して」といった指示があった場合に、このルールを適用してください。

# 1. 「プロジェクトメモリ」の目的
- **考え方**: AIとの対話の中で生まれた重要な決定（例: 「Aというライブラリの採用を決定」）や、複数のファイルにまたがる大きな変更は、後から「なぜこうしたんだっけ？」と分からなくなりがちです。このルールは、そうした文脈を未来の自分のためにファイルとして記録しておくためのものです。

# 2. メモリの記録方法（AIへの指示）
- **トリガー**: ユーザーが「この決定をプロジェクトメモリに記録して」や「今の変更内容をメモリに残して」のように指示します。
- **AIの実行手順**:
  1. プロジェクトのルートに`memory`というフォルダがなければ作成します。
  2. `memory`フォルダ内に、`YYYY-MM-DD_変更内容の要約.md`という名前で新しいMarkdownファイルを作成します。
     - 例: `2025-07-04_認証ロジックをJWTに変更.md`
  3. 作成したファイルに、以下のテンプレートを使って内容を書き込みます。

---
### メモリファイル・テンプレート

`# 📝 決定事項・ユーザーリクエスト`
`(ここに、ユーザーからの指示や、AIとの対話で決まった内容を引用・要約して記述)`

`## 🧠 コンテキスト・スナップショット (AI Context Snapshot)`
`*(次回セッションのAIが、一瞬で状況を理解するための構造化データ)*`

```yaml
context_state:
  current_phase: "実装フェーズ (Phase 3)"
  active_feature: "ユーザー認証 (Auth0統合)"
  pending_tasks:
    - "コールバック処理の実装"
    - "トークン保存処理"
  tech_stack_decisions:
    - "Auth0採用 (理由はセキュリティ要件)"
    - "JWT利用"
  known_issues:
    - "SafariでのCookie挙動に要検証事項あり"
```

`## 🎯 変更の概要`
`(今回の変更で何が達成されたのか、簡潔に記述)`

`## 📂 関連ファイル一覧`
` - src/hooks/useAuth.ts`
` - src/pages/api/login.ts`
` - ...`

`## ✨ 主な変更点`
` - 認証ロジックを従来のセッションベースからJWTベースに変更。`
` - `useAuth`フックをリファクタリングし、トークンの更新処理を追加。`
` - 古いAPIエンドポイントを非推奨とし、新しい`/api/login`を作成。`

---

# 3. AIへの具体的な指示例
- 「さっき話して決めた、決済ライブラリをStripeに統一するという決定を、プロジェクトメモリに記録しておいて。理由は、将来的な海外展開を見据えて、ドキュメントが豊富だから。」
- 「今やった、ヘッダーコンポーネント全体のリファクタリングについて、変更したファイルと概要をメモリにまとめておいてほしい。」